<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<style>*{box-sizing:border-box}body{font-family:system-ui,sans-serif;margin:0}html,body{overflow:hidden}</style>
<meta name='generator' content='mdx-deck'>
<style data-styled-components="jotsoC kmKUJZ eGsEPm zIEGn enxKql fYTmJR jHprQs bMMjuq hISnYn bIQQAp kVSTZj cRpdc igRSVm fhSvky cYxvVY kPArTU cXgiMa eCoqJu hnohUl jlCnmb hOCGEu fbxTAJ bNhvRs">
/* sc-component-id: sc-bdVaJa */
.sc-bdVaJa {} .eCoqJu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:8px;margin-left:auto;margin-right:auto;} @media print{.eCoqJu{display:none;}}
/* sc-component-id: sc-bwzfXH */
.sc-bwzfXH {} .hnohUl{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.5;margin:0px;padding:4px;color:#fff;background-color:#fff;} .hnohUl:focus{outline:none;box-shadow:0 0 0 1px;}.jlCnmb{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.125;margin:0px;padding:4px;color:#fff;background-color:#fff;} .jlCnmb:focus{outline:none;box-shadow:0 0 0 1px;}
/* sc-component-id: sc-htpNat */
.sc-htpNat {} .cXgiMa{position:fixed;left:0;right:0;bottom:0;}
/* sc-component-id: sc-bxivhb */
.sc-bxivhb {} .fbxTAJ{cursor:pointer;width:64px;height:100vh;}
/* sc-component-id: sc-ifAKCX */
.sc-ifAKCX {} .hOCGEu{position:fixed;top:0;left:0;bottom:0;}
/* sc-component-id: sc-EHOje */
.sc-EHOje {} .bNhvRs{position:fixed;top:0;right:0;bottom:0;}
/* sc-component-id: sc-bZQynM */
.sc-bZQynM {} .kmKUJZ{overflow-x:hidden;width:100%;height:100%;} @media print{.kmKUJZ{height:auto;overflow-x:visible;}}
/* sc-component-id: sc-gzVnrw */
.sc-gzVnrw {} .eGsEPm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-transition-property:-webkit-transform;-webkit-transition-property:transform;transition-property:transform;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transform:translateX(0%);-ms-transform:translateX(0%);transform:translateX(0%);} @media print{.eGsEPm{height:auto;display:block;}}
/* sc-component-id: sc-htoDjs */
.sc-htoDjs {} .zIEGn{-webkit-flex:none;-ms-flex:none;flex:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;width:100%;height:100%;padding-left:32px;padding-right:32px;} @media print{.zIEGn{width:100vw;height:100vh;page-break-after:always;page-break-inside:avoid;-webkit-print-color-adjust:exact;}} @media screen and (min-width:40em){.zIEGn{padding-left:64px;padding-right:64px;}} @media screen and (min-width:52em){.zIEGn{padding-left:128px;padding-right:128px;}}
/* sc-component-id: sc-dnqmqq */
.sc-dnqmqq {} .jotsoC{font-family:"Avenir Next",system-ui,sans-serif;font-size:16px;text-align:center;width:100vw;height:100vh;color:#fff;background-color:#111;} @media print{.jotsoC{font-size:24px;height:auto;}} @media screen and (min-width:64em){.jotsoC{font-size:32px;}}
/* sc-component-id: sc-fjdhpX */
.sc-fjdhpX {} .fYTmJR{line-height:1.25;font-size:3em;margin-bottom:16px;margin-top:16px;color:heading;text-transform:uppercase;-webkit-letter-spacing:0.1em;-moz-letter-spacing:0.1em;-ms-letter-spacing:0.1em;letter-spacing:0.1em;font-weight:600;}
/* sc-component-id: sc-jzJRlG */
.sc-jzJRlG {}
/* sc-component-id: sc-cSHVUG */
.sc-cSHVUG {} .bMMjuq{line-height:1.25;font-size:2em;margin-bottom:16px;margin-top:16px;color:heading;text-transform:uppercase;-webkit-letter-spacing:0.1em;-moz-letter-spacing:0.1em;-ms-letter-spacing:0.1em;letter-spacing:0.1em;font-weight:600;}
/* sc-component-id: sc-kAzzGY */
.sc-kAzzGY {}
/* sc-component-id: sc-chPdSV */
.sc-chPdSV {} .cRpdc{line-height:1.25;font-size:1.5em;margin-bottom:16px;margin-top:16px;color:heading;text-transform:uppercase;-webkit-letter-spacing:0.1em;-moz-letter-spacing:0.1em;-ms-letter-spacing:0.1em;letter-spacing:0.1em;font-weight:600;}
/* sc-component-id: sc-kgoBCf */
.sc-kgoBCf {}
/* sc-component-id: sc-hMqMXs */
.sc-hMqMXs {} .kPArTU{color:#0af;}
/* sc-component-id: sc-kEYyzF */
.sc-kEYyzF {} .fhSvky{font-size:1.5em;}
/* sc-component-id: sc-kkGfuU */
.sc-kkGfuU {} .hISnYn{text-align:left;font-size:1.5em;text-align:left;}
/* sc-component-id: sc-hSdWYo */
.sc-hSdWYo {}
/* sc-component-id: sc-jWBwVP */
.sc-jWBwVP {} .igRSVm{font-family:Menlo,monospace;color:#0af;background-color:codeBackground;}
/* sc-component-id: sc-jDwBTQ */
.sc-jDwBTQ {} .cYxvVY{background-position:center;background-repeat:no-repeat;background-size:cover;background-image:url(https://media.giphy.com/media/pPhyAv5t9V8djyRFJH/giphy.gif);width:100vw;height:100vh;}</style>
</head>
<body>
<div id=root><div><div class="sc-dnqmqq jotsoC" mode="NORMAL" step="0" width="100vw" height="100vh" color="text"><div class="sc-bZQynM kmKUJZ"><div class="sc-gzVnrw eGsEPm"><div class="sc-htoDjs zIEGn"><div><div style="position:absolute;top:0;padding:20px;z-index:1000"><img src="img/nordstrom.png" width="300"/></div><div style="display:flex;justify-content:center;align-items:center"><img src="img/k8s.png" width="200"/><span style="font-size:5rem;display:inline-block;margin:0 2rem;font-weight:500">vs</span><img src="img/cloud-functions.png" width="200"/></div><h1 class="sc-jzJRlG enxKql sc-fjdhpX fYTmJR" font-size="4" color="heading">A DevOps Bake-off:</h1><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes vs. GCloud Functions</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">A bit about me...</h2><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE"><span class="token" style="color:#96CBFE"><span class="token" style="color:#c5c8c6">&lt;</span>SoftwareEngineer</span>
  <span class="token" style="color:#A8FF60">name</span><span class="token" style="color:#F9EE98"><span class="token" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&quot;</span>Sam Skjonsberg<span class="token" style="color:#c5c8c6">&quot;</span></span>
  <span class="token" style="color:#A8FF60">location</span><span class="token" style="color:#F9EE98"><span class="token" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&quot;</span>Seattle ‚òïÔ∏è<span class="token" style="color:#c5c8c6">&quot;</span></span>
  <span class="token" style="color:#A8FF60">company</span><span class="token" style="color:#F9EE98"><span class="token" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&quot;</span>Nordstrom<span class="token" style="color:#c5c8c6">&quot;</span></span>
  <span class="token" style="color:#A8FF60">organization</span><span class="token" style="color:#F9EE98"><span class="token" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">&quot;</span>Engineering Platform<span class="token" style="color:#c5c8c6">&quot;</span></span>
  <span class="token" style="color:#A8FF60">workedAt</span><span class="token,script,language-javascript"><span class="token,script-punctuation" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">[</span> <span class="token" style="color:#A8FF60">&quot;AI2&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;Yabbly&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;OpenCar&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;Marchex&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;...&quot;</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">}</span></span>
  <span class="token" style="color:#A8FF60">likes</span><span class="token,script,language-javascript"><span class="token,script-punctuation" style="color:#c5c8c6">=</span><span class="token" style="color:#c5c8c6">{</span><span class="token" style="color:#c5c8c6">[</span> <span class="token" style="color:#A8FF60">&quot;JavaScript&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;Python&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;Docker&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;DevOps!&quot;</span> <span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">}</span></span> <span class="token" style="color:#c5c8c6">/&gt;</span></span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/k8s.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes 101:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Automate, manage and scale container based software</li><li class="sc-hSdWYo bIQQAp">YAML + Docker = Run lots of containers on lots of nodes</li><li class="sc-hSdWYo bIQQAp">Powerful CLI and great documentation üìö</li><li class="sc-hSdWYo bIQQAp">Opensource</li><li class="sc-hSdWYo bIQQAp">Requires cluster setup and management</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes 101:</h2><img src="img/k8s-arch-diagram.png" width="800"/></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/cloud-functions.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">GCloud Functions in 30 Seconds:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Vendor provided service for executing code in response to events</li><li class="sc-hSdWYo bIQQAp">&quot;Infinite scale&quot; and zero maintenance, all infrastructure is managed by Google</li><li class="sc-hSdWYo bIQQAp">Multiple language runtimes: node6, node8 and python 3.7</li><li class="sc-hSdWYo bIQQAp">But it&#x27;s not as fully featured as AWS&#x27;s toolset, the largest gap being API Gateway</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Why (I think) you should care:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">We&#x27;re building the ‚úàÔ∏è while flying it</li><li class="sc-hSdWYo bIQQAp">DevOps is the rocket booster launching us out of Earth&#x27;s atmosphere üöÄ</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">...but oftentimes we use a glider instead üôÜ‚Äç</h3></div></div><div class="sc-htoDjs zIEGn"><div><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">...that we attach a single prop engine to ü§î</h3></div></div><div class="sc-htoDjs zIEGn"><div><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">...which we eventually give auto pilot üò¶</h3></div></div><div class="sc-htoDjs zIEGn"><div><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">...which inevitably enounters a lot of turbulence üí•</h3></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">So instead...</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Let&#x27;s build a rocket ship!</h2><br/><img src="https://media.giphy.com/media/k0CJuMw9h7m3S/giphy.gif" width="600" style="border-radius:0.5rem"/></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">What we built:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Both are simple web applications</li><li class="sc-hSdWYo bIQQAp">Non-stateful, data is queried from upstream services</li><li class="sc-hSdWYo bIQQAp">Both use <code class="sc-jWBwVP igRSVm" color="code">React</code> and <code class="sc-jWBwVP igRSVm" color="code">webpack</code> and are written in <code class="sc-jWBwVP igRSVm" color="code">JavaScript</code></li><li class="sc-hSdWYo bIQQAp">Each route is it&#x27;s own SPA, rather than one aggregate application</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes</h2><br/><div style="display:flex;align-items:center;justify-content:center"><div><img src="img/load-balancer.png" width="200"/><div>Cloud Load Balancer</div></div><div><img src="img/arrow.png" width="150"/></div><div><img src="img/k8s.png" width="200"/><div>Web Application</div></div><div><img src="img/arrow.png" width="150"/></div><div><img src="img/cloud.png" width="200"/><div>External Datasources</div></div></div></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Google Cloud Functions</h2><br/><div style="display:flex;align-items:center;justify-content:center"><div><img src="img/cloud-functions.png" width="200"/><div>Web Application</div></div><div><img src="img/arrow.png" width="150"/></div><div><img src="img/cloud.png" width="200"/><div>External Datasources</div></div></div></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/k8s.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Local Development</h2></div></div><div class="sc-htoDjs zIEGn"><div><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Express runtime dependencies in your <code class="sc-jWBwVP igRSVm" color="code">Dockerfile</code></li><li class="sc-hSdWYo bIQQAp">Use <code class="sc-jWBwVP igRSVm" color="code">docker-compose</code> to locally build and run containers for fast feedback loop</li><li class="sc-hSdWYo bIQQAp">Can use local kubernetes to verify production environment</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">import</span> renderHome <span class="token" style="color:#96CBFE">from</span> <span class="token" style="color:#A8FF60">&#x27;./home&#x27;</span><span class="token" style="color:#c5c8c6">;</span>
<span class="token" style="color:#96CBFE">import</span> searchAndRenderResults <span class="token" style="color:#96CBFE">from</span> <span class="token" style="color:#A8FF60">&#x27;./search&#x27;</span>

<span class="token" style="color:#96CBFE">const</span> server <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#DAD085">express</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span>
<span class="token" style="color:#96CBFE">const</span> port <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#FF73FD">3000</span><span class="token" style="color:#c5c8c6">;</span>
server
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/search&#x27;</span><span class="token" style="color:#c5c8c6">,</span> searchAndRenderResults<span class="token" style="color:#c5c8c6">)</span>
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/&#x27;</span><span class="token" style="color:#c5c8c6">,</span> renderHome<span class="token" style="color:#c5c8c6">)</span>
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">use</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/static&#x27;</span><span class="token" style="color:#c5c8c6">,</span> express<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">static</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">listen</span><span class="token" style="color:#c5c8c6">(</span>port<span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#EDEDED">=&gt;</span> console<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">log</span><span class="token" style="color:#c5c8c6">(</span><span class="token,template-string"><span class="token" style="color:#A8FF60">`listening at http://localhost:</span><span class="token,interpolation"><span class="token,interpolation-punctuation" style="color:#c5c8c6">${</span>port<span class="token,interpolation-punctuation" style="color:#c5c8c6">}</span></span><span class="token" style="color:#A8FF60">`</span></span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">&quot;scripts&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">&quot;build&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;webpack&quot;</span><span class="token" style="color:#c5c8c6">,</span>
  <span class="token" style="color:#96CBFE">&quot;start&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;node dist/server&quot;</span><span class="token" style="color:#c5c8c6">,</span>
  <span class="token" style="color:#96CBFE">&quot;start:dev&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;nodemon dist/server&quot;</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">FROM</span> node<span class="token" style="color:#c5c8c6">:</span>8.12.0<span class="token" style="color:#c5c8c6">-</span>alpine
<span class="token" style="color:#7C7C7C"># Create a spot for source code, and install dependencies</span>
<span class="token" style="color:#96CBFE">WORKDIR</span> /webui
<span class="token" style="color:#96CBFE">COPY</span> package.json yarn.lock ./
<span class="token" style="color:#96CBFE">RUN</span> yarn install
<span class="token" style="color:#7C7C7C"># Copy over our source code</span>
<span class="token" style="color:#96CBFE">COPY</span> . .
<span class="token" style="color:#7C7C7C"># This allows us to set this at build time via `--build-arg`</span>
<span class="token" style="color:#96CBFE">ARG</span> NODE_ENV
<span class="token" style="color:#96CBFE">ENV</span> NODE_ENV $<span class="token" style="color:#c5c8c6">{</span>NODE_ENV<span class="token" style="color:#c5c8c6">:</span><span class="token" style="color:#c5c8c6">-</span>development<span class="token" style="color:#c5c8c6">}</span>
<span class="token" style="color:#7C7C7C"># Build n&#x27; start!</span>
<span class="token" style="color:#96CBFE">RUN</span> yarn build
<span class="token" style="color:#96CBFE">EXPOSE</span> 3000
<span class="token" style="color:#96CBFE">CMD</span> <span class="token" style="color:#c5c8c6">[</span> <span class="token" style="color:#A8FF60">&quot;yarn&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;start&quot;</span> <span class="token" style="color:#c5c8c6">]</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/dockerhub.png" width="800"/></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token,key" style="color:#F9EE98">version</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#A8FF60">&#x27;3&#x27;</span>
<span class="token,key" style="color:#F9EE98">services</span><span class="token" style="color:#c5c8c6">:</span>
  <span class="token,key" style="color:#F9EE98">server</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token" style="color:#c5c8c6">...</span>
  <span class="token,key" style="color:#F9EE98">webpack</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token" style="color:#c5c8c6">...</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">  <span class="token,key" style="color:#F9EE98">server</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">build</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token,key" style="color:#F9EE98">context</span><span class="token" style="color:#c5c8c6">:</span> .
    <span class="token,key" style="color:#F9EE98">env_file</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token" style="color:#c5c8c6">-</span> ./dev/webui.env
      <span class="token" style="color:#c5c8c6">-</span> ./dev/secrets.webui.env
    <span class="token,key" style="color:#F9EE98">ports</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token" style="color:#c5c8c6">-</span> <span class="token" style="color:#A8FF60">&quot;3000:3000&quot;</span>
    <span class="token,key" style="color:#F9EE98">depends_on</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token" style="color:#c5c8c6">-</span> webpack
    <span class="token,key" style="color:#F9EE98">volumes</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token" style="color:#c5c8c6">-</span> ./src<span class="token" style="color:#c5c8c6">:</span>/webui/src
      <span class="token" style="color:#c5c8c6">-</span> ./dist<span class="token" style="color:#c5c8c6">:</span>/webui/dist
    <span class="token,key" style="color:#F9EE98">command</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#c5c8c6">[</span> <span class="token" style="color:#A8FF60">&quot;yarn&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;start:dev&quot;</span> <span class="token" style="color:#c5c8c6">]</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">  <span class="token,key" style="color:#F9EE98">webpack</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token,key" style="color:#F9EE98">build</span><span class="token" style="color:#c5c8c6">:</span>
        <span class="token,key" style="color:#F9EE98">context</span><span class="token" style="color:#c5c8c6">:</span> .
      <span class="token,key" style="color:#F9EE98">environment</span><span class="token" style="color:#c5c8c6">:</span>
        <span class="token" style="color:#c5c8c6">-</span> NODE_ENV=$<span class="token" style="color:#c5c8c6">{</span>NODE_ENV<span class="token" style="color:#c5c8c6">:</span><span class="token" style="color:#c5c8c6">-</span>development<span class="token" style="color:#c5c8c6">}</span>
      <span class="token,key" style="color:#F9EE98">volumes</span><span class="token" style="color:#c5c8c6">:</span>
        <span class="token" style="color:#c5c8c6">-</span> ./src<span class="token" style="color:#c5c8c6">:</span>/webui/src
        <span class="token" style="color:#c5c8c6">-</span> ./dist<span class="token" style="color:#c5c8c6">:</span>/webui/dist
      <span class="token,key" style="color:#F9EE98">command</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#c5c8c6">[</span> <span class="token" style="color:#A8FF60">&quot;/webui/node_modules/webpack-cli/bin/cli.js&quot;</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#A8FF60">&quot;--watch&quot;</span> <span class="token" style="color:#c5c8c6">]</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">~ docker-compose up --build
server_1   <span class="token" style="color:#EDEDED">|</span> <span class="token" style="color:#c5c8c6">[</span>nodemon<span class="token" style="color:#c5c8c6">]</span> starting <span class="token" style="color:#C6C5FE"><span class="token" style="color:#C6C5FE">`</span>node dist/server<span class="token" style="color:#C6C5FE">`</span></span>
server_1   <span class="token" style="color:#EDEDED">|</span> listening @ http://localhost:3000
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/local-k8s-setup.png" style="max-width:1224px"/></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">~ docker build <span class="token" style="color:#96CBFE">.</span> -t your.registryurl.io/webui:trunk
~ kubectl config use-context docker-for-desktop
~ <span class="token" style="color:#DAD085">sed</span> -i <span class="token" style="color:#A8FF60">&quot;.swp&quot;</span> \
    <span class="token" style="color:#A8FF60">&quot;s/%SHA%/your.registryurl.io/webui:trunk/&quot;</span> \
    k8s/config.yml
~ kubectl apply -f k8s/config.yml
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/cloud-functions.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Google Cloud Functions:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Local Development</h2></div></div><div class="sc-htoDjs zIEGn"><div><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Our application is a single cloud function that handles multiple routes</li><li class="sc-hSdWYo bIQQAp">Each invocation is (potentially) executed in isolation in production</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">import</span> renderHome <span class="token" style="color:#96CBFE">from</span> <span class="token" style="color:#A8FF60">&#x27;./home&#x27;</span><span class="token" style="color:#c5c8c6">;</span>
<span class="token" style="color:#96CBFE">import</span> searchAndRenderResults <span class="token" style="color:#96CBFE">from</span> <span class="token" style="color:#A8FF60">&#x27;./search&#x27;</span>

<span class="token" style="color:#96CBFE">const</span> server <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#DAD085">express</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span>
<span class="token" style="color:#96CBFE">const</span> port <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#FF73FD">3000</span><span class="token" style="color:#c5c8c6">;</span>

server
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/search&#x27;</span><span class="token" style="color:#c5c8c6">,</span> searchAndRenderResults<span class="token" style="color:#c5c8c6">)</span>
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">get</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/&#x27;</span><span class="token" style="color:#c5c8c6">,</span> renderHome<span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">;</span>

<span class="token" style="color:#96CBFE">if</span> <span class="token" style="color:#c5c8c6">(</span>process<span class="token" style="color:#c5c8c6">.</span>env<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#99CC99">LOCAL</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#c5c8c6">{</span>
  server<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">use</span><span class="token" style="color:#c5c8c6">(</span>express<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#96CBFE">static</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&#x27;/static&#x27;</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
<span class="token" style="color:#c5c8c6">}</span>

server<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">listen</span><span class="token" style="color:#c5c8c6">(</span>port<span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#EDEDED">=&gt;</span> console<span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#DAD085">log</span><span class="token" style="color:#c5c8c6">(</span><span class="token,template-string"><span class="token" style="color:#A8FF60">`listening at http://localhost:</span><span class="token,interpolation"><span class="token,interpolation-punctuation" style="color:#c5c8c6">${</span>port<span class="token,interpolation-punctuation" style="color:#c5c8c6">}</span></span><span class="token" style="color:#A8FF60">`</span></span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">&quot;scripts&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">&quot;build&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;webpack --config webpack.config.cloud.js&quot;</span><span class="token" style="color:#c5c8c6">,</span>
  <span class="token" style="color:#96CBFE">&quot;start:dev&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;webpack --config webpack.config.local.js&quot;</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">yarn start:dev
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/k8s.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Building Code</h2></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#7C7C7C"># Build the image</span>
~ docker build <span class="token" style="color:#96CBFE">.</span> \
  -t your.registryurl.io/webui:release-20180513-081033 \
  --build-arg NODE_ENV<span class="token" style="color:#EDEDED">=</span>production \

<span class="token" style="color:#7C7C7C"># Publish it to the container registry</span>
~ docker push your.registryurl.io/webui:release-20180513-081033
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/cloud-functions.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Google Cloud Functions:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Building Code</h2></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">&quot;scripts&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">&quot;build&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;webpack --config webpack.config.cloud.js&quot;</span><span class="token" style="color:#c5c8c6">,</span>
  <span class="token" style="color:#96CBFE">&quot;start:dev&quot;</span><span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">&quot;webpack --config webpack.config.local.js&quot;</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><p class="sc-kEYyzF fhSvky" font-size="2">Your function will be bundled into a single executable.</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">NODE_ENV<span class="token" style="color:#EDEDED">=</span>production
<span class="token" style="color:#7C7C7C"># That&#x27;s all folks!</span>
yarn build
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/k8s.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Deploying Code</h2></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token,key" style="color:#F9EE98">apiVersion</span><span class="token" style="color:#c5c8c6">:</span> apps/v1
<span class="token,key" style="color:#F9EE98">kind</span><span class="token" style="color:#c5c8c6">:</span> Deployment
<span class="token,key" style="color:#F9EE98">metadata</span><span class="token" style="color:#c5c8c6">:</span>
  <span class="token,key" style="color:#F9EE98">name</span><span class="token" style="color:#c5c8c6">:</span> webui
  <span class="token,key" style="color:#F9EE98">labels</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">app</span><span class="token" style="color:#c5c8c6">:</span> webui
<span class="token,key" style="color:#F9EE98">spec</span><span class="token" style="color:#c5c8c6">:</span>
  <span class="token,key" style="color:#F9EE98">replicas</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">3</span>
  <span class="token,key" style="color:#F9EE98">selector</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">matchLabels</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token,key" style="color:#F9EE98">app</span><span class="token" style="color:#c5c8c6">:</span> webui
  <span class="token,key" style="color:#F9EE98">template</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">metadata</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">labels</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token,key" style="color:#F9EE98">app</span><span class="token" style="color:#c5c8c6">:</span> webui
    <span class="token" style="color:#c5c8c6">...</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">    <span class="token,key" style="color:#F9EE98">spec</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token,key" style="color:#F9EE98">containers</span><span class="token" style="color:#c5c8c6">:</span>
        <span class="token" style="color:#c5c8c6">-</span> <span class="token,key" style="color:#F9EE98">name</span><span class="token" style="color:#c5c8c6">:</span> webui
          <span class="token,key" style="color:#F9EE98">image</span><span class="token" style="color:#c5c8c6">:</span> your.registryurl.io/webui<span class="token" style="color:#c5c8c6">:</span>%SHA%
          <span class="token,key" style="color:#F9EE98">resources</span><span class="token" style="color:#c5c8c6">:</span>
            <span class="token,key" style="color:#F9EE98">requests</span><span class="token" style="color:#c5c8c6">:</span>
              <span class="token,key" style="color:#F9EE98">cpu</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">1</span>
              <span class="token,key" style="color:#F9EE98">memory</span><span class="token" style="color:#c5c8c6">:</span> 256Mi
          <span class="token,key" style="color:#F9EE98">ports</span><span class="token" style="color:#c5c8c6">:</span>
            <span class="token" style="color:#c5c8c6">-</span> <span class="token,key" style="color:#F9EE98">containerPort</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">3000</span>
          <span class="token,key" style="color:#F9EE98">livenessProbe</span><span class="token" style="color:#c5c8c6">:</span>
            <span class="token,key" style="color:#F9EE98">httpGet</span><span class="token" style="color:#c5c8c6">:</span>
              <span class="token,key" style="color:#F9EE98">path</span><span class="token" style="color:#c5c8c6">:</span> /health
              <span class="token,key" style="color:#F9EE98">port</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">3000</span>
              <span class="token,key" style="color:#F9EE98">scheme</span><span class="token" style="color:#c5c8c6">:</span> HTTPS
            <span class="token,key" style="color:#F9EE98">initialDelaySeconds</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">5</span>
            <span class="token,key" style="color:#F9EE98">periodSeconds</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">30</span>
            <span class="token" style="color:#c5c8c6">...</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">    <span class="token,key" style="color:#F9EE98">envFrom</span><span class="token" style="color:#c5c8c6">:</span>
      <span class="token" style="color:#c5c8c6">-</span> <span class="token,key" style="color:#F9EE98">configMapRef</span><span class="token" style="color:#c5c8c6">:</span>
          <span class="token,key" style="color:#F9EE98">name</span><span class="token" style="color:#c5c8c6">:</span> webui<span class="token" style="color:#c5c8c6">-</span>env
      <span class="token" style="color:#c5c8c6">-</span> <span class="token,key" style="color:#F9EE98">secretRef</span><span class="token" style="color:#c5c8c6">:</span>
          <span class="token,key" style="color:#F9EE98">name</span><span class="token" style="color:#c5c8c6">:</span> webui<span class="token" style="color:#c5c8c6">-</span>env
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token,key" style="color:#F9EE98">kind</span><span class="token" style="color:#c5c8c6">:</span> Service
<span class="token,key" style="color:#F9EE98">apiVersion</span><span class="token" style="color:#c5c8c6">:</span> v1
<span class="token,key" style="color:#F9EE98">metadata</span><span class="token" style="color:#c5c8c6">:</span>
  <span class="token,key" style="color:#F9EE98">name</span><span class="token" style="color:#c5c8c6">:</span> webui
<span class="token,key" style="color:#F9EE98">spec</span><span class="token" style="color:#c5c8c6">:</span>
  <span class="token,key" style="color:#F9EE98">selector</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token,key" style="color:#F9EE98">app</span><span class="token" style="color:#c5c8c6">:</span> webui
  <span class="token,key" style="color:#F9EE98">ports</span><span class="token" style="color:#c5c8c6">:</span>
    <span class="token" style="color:#c5c8c6">-</span> <span class="token,key" style="color:#F9EE98">protocol</span><span class="token" style="color:#c5c8c6">:</span> TCP
      <span class="token,key" style="color:#F9EE98">port</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">443</span>
      <span class="token,key" style="color:#F9EE98">targetPort</span><span class="token" style="color:#c5c8c6">:</span> <span class="token" style="color:#FF73FD">3000</span>
  <span class="token,key" style="color:#F9EE98">type</span><span class="token" style="color:#c5c8c6">:</span> LoadBalancer
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#7C7C7C"># Connect to the Kubernetes Cluster</span>
gcloud container clusters get-credentials cluster-1 --region<span class="token" style="color:#EDEDED">=</span>us-west1
<span class="token" style="color:#7C7C7C"># Set the namespace for every kubectl command that follows</span>
kubectl config set-context <span class="token" style="color:#c5c8c6">(</span>kubectl config current-context<span class="token" style="color:#c5c8c6">)</span> --namespace<span class="token" style="color:#EDEDED">=</span>webui
<span class="token" style="color:#7C7C7C"># Set the version of our container that we want to deploy</span>
<span class="token" style="color:#DAD085">sed</span> -i <span class="token" style="color:#A8FF60">&quot;s/%SHA%/<span class="token" style="color:#C6C5FE">$DOCKER_IMAGE_SHA</span>/&quot;</span> k8s/config.yml
<span class="token" style="color:#7C7C7C"># Deploy! Kubernetes figures out what to do</span>
kubectl apply -f config.yml
<span class="token" style="color:#7C7C7C"># Block until it&#x27;s done, and print out the status as things occur</span>
kubectl rollout status -w deployments webui
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/cloud-functions.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Google Cloud Functions:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Deploying Code</h2></div></div><div class="sc-htoDjs zIEGn"><div><p class="sc-kEYyzF fhSvky" font-size="2">First, ship your assets to object storage so you can let Google do the heavy lifting üí™:</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#7C7C7C"># Ship our assets up to the cloud</span>
gsutil <span class="token" style="color:#DAD085">cp</span> -r <span class="token" style="color:#A8FF60">&quot;./dist/static&quot;</span> gs://webui-assets/
<span class="token" style="color:#7C7C7C"># Give everyone access to it</span>
gsutil acl ch -ur AllUsers:R gs://webui-assets/
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><p class="sc-kEYyzF fhSvky" font-size="2">Then deploy the code:</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#DAD085">cd</span> dist/webui
gcloud functions deploy webui \
    --runtime nodejs8 \
    --trigger-http \
    --set-env-var NODE_ENV<span class="token" style="color:#EDEDED">=</span>production
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">At this point, your cloud function will be available at a URL like: <br/> <code class="sc-jWBwVP igRSVm" color="code">https://us-central1-sandbox-kbqg.cloudfunctions.net/webui</code></li><li class="sc-hSdWYo bIQQAp">Yes, that&#x27;s not a very friendly URL</li><li class="sc-hSdWYo bIQQAp">Unfortunately Google doesn&#x27;t have an analog for AWS API Gateway (yet) that makes this easy
to resolve.</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><div class="sc-jDwBTQ cYxvVY" src="https://media.giphy.com/media/pPhyAv5t9V8djyRFJH/giphy.gif" width="100vw" height="100vh"></div></div></div><div class="sc-htoDjs zIEGn"><div><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">To resolve this you could use a reverse proxy that&#x27;s hosted somewhere else</li><li class="sc-hSdWYo bIQQAp">...but don&#x27;t do that, as that defeats the point</li><li class="sc-hSdWYo bIQQAp">Another option is &quot;Cloud Functions for Firebase&quot;, which is something we&#x27;re looking into</li><li class="sc-hSdWYo bIQQAp">But for now it rules out Cloud Functions for UIs that require a vanity URL</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/k8s.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Kubernetes:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Observability and Debugging</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Who doesn&#x27;t love logs?</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Standard out can easily be sent to Google&#x27;s Stackdriver service, and viewed with the <code class="sc-jWBwVP igRSVm" color="code">kubectl log</code>
command line API.</li></ul><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#7C7C7C"># Read all logs on k8s for a given pod</span>
kubectl logs pod/webui
<span class="token" style="color:#7C7C7C"># Pipe them to your favorite shell utility and work wizardry ‚ú®</span>
kubectl logs pod/webui <span class="token" style="color:#EDEDED">|</span> <span class="token" style="color:#DAD085">grep</span> <span class="token" style="color:#A8FF60">&#x27;Error&#x27;</span>
<span class="token" style="color:#7C7C7C"># Follow them!</span>
kubectl -f logs pod/webui`
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Debugging deployed environments:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">If something fishy üêü is happening, we can debug via a shell running in a specific pod:</li></ul><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">kubectl <span class="token" style="color:#DAD085">exec</span> -it pod/webui -- /bin/sh
<span class="token" style="color:#EDEDED">&gt;</span> <span class="token" style="color:#DAD085">env</span> <span class="token" style="color:#EDEDED">|</span> <span class="token" style="color:#DAD085">grep</span> <span class="token" style="color:#A8FF60">&#x27;SUPER_SECRET_API_KEY&#x27;</span>
SUPER_SECRET_API_KEY<span class="token" style="color:#EDEDED">=</span>≈ö√ôP3R_≈†√ãCR3TS
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><img src="img/cloud-functions.png" width="200"/><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Google Cloud Functions:</h2><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Observability and Debugging</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Logs, logs and more logs:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Logs are automatically aggregated using Stackdriver, and can be viewed via a command line API as
well:</li></ul><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">gcloud functions logs <span class="token" style="color:#DAD085">read</span>
gcloud functions logs <span class="token" style="color:#DAD085">read</span> FUNCTION_NAME
gcloud functions logs <span class="token" style="color:#DAD085">read</span> FUNCTION_NAME --execution-id EXECUTION_ID
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">So, who wins?</h2></div></div><div class="sc-htoDjs zIEGn"><div><h1 class="sc-jzJRlG enxKql sc-fjdhpX fYTmJR" font-size="4" color="heading"><code class="sc-jWBwVP igRSVm" color="code">¬Ø\_(„ÉÑ)_/¬Ø</code></h1><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">(It depends)</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">The &quot;Kase&quot; for Kubernetes</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">More powerful for operators</li><li class="sc-hSdWYo bIQQAp">Lots of flexibility (cronjobs, web services, etc), though this may be a double edge sword ‚öîÔ∏è...</li><li class="sc-hSdWYo bIQQAp">It&#x27;s open source and cloud agnostic (kind of)</li><li class="sc-hSdWYo bIQQAp">Powerful deployment capabilities</li><li class="sc-hSdWYo bIQQAp">Full control of execution environment allows fine grained control of latency</li><li class="sc-hSdWYo bIQQAp"><code class="sc-jWBwVP igRSVm" color="code">knative</code> is coming...</li><li class="sc-hSdWYo bIQQAp">BUT...it takes a lot of ramp up, and requires cluster setup and maintenance</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Favoring Functions</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Less is more, but you&#x27;re bound to your vendor</li><li class="sc-hSdWYo bIQQAp">Could save your organization money with certain types of services</li><li class="sc-hSdWYo bIQQAp">Fully abstracted and infinitely scalable</li><li class="sc-hSdWYo bIQQAp">There are gaps in Google Cloud&#x27;s offering, but Google is catching up fast...</li><li class="sc-hSdWYo bIQQAp">BUT...there are use-cases which don&#x27;t make sense (like a UI)</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Use Kubernetes for:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Customer facing UIs</li><li class="sc-hSdWYo bIQQAp">Internal tools that need to be accessible at friendly URLS</li><li class="sc-hSdWYo bIQQAp">Memory or time intensive applications</li><li class="sc-hSdWYo bIQQAp">Cronjobs and batch processes</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">Use Google Cloud Functions for:</h2><ul class="sc-kkGfuU hISnYn" font-size="2"><li class="sc-hSdWYo bIQQAp">Event based architectures (<a class="sc-hMqMXs kPArTU" href="https://github.com/Nordstrom/serverless-artillery" color="link">https://github.com/Nordstrom/serverless-artillery</a>)</li><li class="sc-hSdWYo bIQQAp">Back-end services that don&#x27;t have aggressive latency targets</li><li class="sc-hSdWYo bIQQAp">Bulk message processing, index population</li><li class="sc-hSdWYo bIQQAp">Non customer facing UIs / administrative UIs intended for low usage</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">QUICK DEMO TIME</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 class="sc-kAzzGY jHprQs sc-cSHVUG bMMjuq" font-size="3" color="heading">üëã Thanks Denver!</h2><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">@codeviking</h3><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading">sam.skjonsberg@nordstrom.com</h3><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading"><a class="sc-hMqMXs kPArTU" href="http://careers.nordstrom.com" color="link">http://careers.nordstrom.com</a></h3><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading"><a class="sc-hMqMXs kPArTU" href="http://codeviking.net/slides/devops-bakeoff" color="link">http://codeviking.net/slides/devops-bakeoff</a></h3><h3 class="sc-kgoBCf kVSTZj sc-chPdSV cRpdc" font-size="2" color="heading"><a class="sc-hMqMXs kPArTU" href="https://github.com/jxnblk/mdx-deck" color="link">https://github.com/jxnblk/mdx-deck</a></h3><img src="img/nordstrom.png" width="400" style="margin:40px 0 0"/></div></div></div></div></div></div><div class="sc-htpNat cXgiMa"><div class="sc-bdVaJa eCoqJu"><button class="sc-bwzfXH hnohUl" title="go to: 0" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 1" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 2" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 3" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 4" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 5" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 6" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 7" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 8" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 9" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 10" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 11" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 12" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 13" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 14" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 15" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 16" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 17" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 18" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 19" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 20" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 21" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 22" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 23" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 24" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 25" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 26" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 27" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 28" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 29" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 30" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 31" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 32" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 33" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 34" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 35" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 36" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 37" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 38" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 39" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 40" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 41" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 42" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 43" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 44" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 45" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 46" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 47" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 48" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 49" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 50" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 51" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 52" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 53" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 54" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 55" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 56" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 57" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 58" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 59" color="text"></button><button class="sc-bwzfXH jlCnmb" title="go to: 60" color="text"></button></div></div><div class="sc-ifAKCX hOCGEu sc-bxivhb fbxTAJ" role="button" title="Previous Slide"></div><div class="sc-EHOje bNhvRs sc-bxivhb fbxTAJ" role="button" title="Next Slide"></div></div>
<script src="main.js"></script>
</body>
</html>
